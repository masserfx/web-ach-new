# üéâ Neo4j Analytics & Monitoring - KOMPLETN√ç BAL√çƒåEK

## ‚úÖ Co bylo vytvo≈ôeno

### üì¶ Nov√© soubory (7)

```
~/ac-heating-web-new/scripts/strategy/
‚îú‚îÄ‚îÄ web_content_schema.py          # Extended schema pro web content
‚îú‚îÄ‚îÄ import_web_content.py          # Import script pro ƒçl√°nky/obr√°zky
‚îú‚îÄ‚îÄ neo4j_queries.cypher           # 33 Cypher dotaz≈Ø
‚îú‚îÄ‚îÄ neo4j_dashboard.html           # Interaktivn√≠ HTML dashboard
‚îú‚îÄ‚îÄ NEO4J_QUERIES_GUIDE.md         # Kompletn√≠ pr≈Øvodce dotazy
‚îú‚îÄ‚îÄ NEO4J_INTEGRATION_GUIDE.md     # P≈Øvodn√≠ guide (aktualizovan√Ω)
‚îî‚îÄ‚îÄ NEO4J_ANALYTICS_COMPLETE.md    # Tento soubor
```

### üé® Roz≈°√≠≈ôen√© Neo4j Schema

```
P≈ÆVODN√ç SCHEMA:
Agent ‚Üí Execution ‚Üí Task ‚Üí Learning ‚Üí Pattern

NOV√â ROZ≈†√ç≈òEN√ç:
Article (ƒçl√°nky)
  ‚îú‚îÄ‚îÄ CONTAINS_IMAGE ‚Üí Image (obr√°zky)
  ‚îú‚îÄ‚îÄ IN_CATEGORY ‚Üí Category (kategorie)
  ‚îú‚îÄ‚îÄ TAGGED_WITH ‚Üí Tag (tagy)
  ‚îî‚îÄ‚îÄ GENERATED_CONTENT ‚Üê Task (propojen√≠ s tasky)

Page (str√°nky webu)
  ‚îî‚îÄ‚îÄ meta data, SEO info

Agent ‚Üí CREATED ‚Üí Article (kdo vytvo≈ôil ƒçl√°nek)
```

### üìä 33 Cypher Dotaz≈Ø v 8 kategori√≠ch

#### 1. Dashboard (3 dotazy)
- #1 - Celkov√Ω p≈ôehled syst√©mu
- #2 - Souƒçasn√Ω stav task≈Ø
- #3 - Agent Performance Overview

#### 2. Agent Monitoring (7 dotaz≈Ø)
- #4 - Detail jednotliv√©ho agenta
- #5 - Agent Collaboration Network
- #6 - Agent Performance Trends
- #7 - V≈°ichni agenti s metrikami

#### 3. Task Monitoring (5 dotaz≈Ø)
- #8 - Task Detail s histori√≠
- #9 - Tasky podle priorit
- #10 - Nedokonƒçen√© tasky
- #11 - Task Dependencies
- #12 - Tasks by Category

#### 4. Learning & Patterns (4 dotazy)
- #13 - V≈°echny nauƒçen√© patterns
- #14 - Learning Insights per Agent
- #15 - High-Impact Learnings
- #16 - Pattern Evolution

#### 5. Web Content Analytics (6 dotaz≈Ø)
- #17 - V≈°echny ƒçl√°nky s metrikami
- #18 - Top Performing Content
- #19 - Image Usage Analytics
- #20 - Content by Category
- #21 - Article ‚Üí Task Connection
- #22 - Tag Cloud

#### 6. Advanced Analytics (7 dotaz≈Ø)
- #23 - Complete Content Pipeline
- #24 - ROI Analysis (Cost vs Performance)
- #25 - Quality Trends Over Time
- #26 - Agent Specialization Matrix
- #27 - Knowledge Graph Completeness

#### 7. Real-time Monitoring (3 dotazy)
- #28 - Posledn√≠ Activity (24h)
- #29 - Active Tasks NOW
- #30 - Error Analysis

#### 8. Strategic Insights (3 dotazy)
- #31 - Content Gap Analysis
- #32 - Agent Efficiency Comparison
- #33 - Viral Content Prediction

## üöÄ Jak to pou≈æ√≠t

### 1. P≈ô√≠stup k Neo4j Browser

```
URL: http://91.99.126.53:7474
Username: neo4j
Password: ac-heating-2024
```

### 2. Interaktivn√≠ Dashboard

**Lok√°ln√≠:**
```bash
# Na va≈°em poƒç√≠taƒçi
cd /path/to/strategy/
open neo4j_dashboard.html
```

**Server (HTTP server):**
```bash
ssh -i ~/.ssh/hetzner_server_ed25519 leos@91.99.126.53
cd ~/ac-heating-web-new/scripts/strategy
python3 -m http.server 8080

# Otev≈ôete: http://91.99.126.53:8080/neo4j_dashboard.html
```

Dashboard obsahuje:
- ‚úÖ V≈°echny 33 dotazy organizovan√© v kategori√≠ch
- ‚úÖ Click-to-expand pro zobrazen√≠ Cypher k√≥du
- ‚úÖ Copy-to-clipboard tlaƒç√≠tka
- ‚úÖ Responzivn√≠ design
- ‚úÖ Live search (p≈ôipraveno pro budoucnost)

### 3. Import Sample Content

```bash
cd ~/ac-heating-web-new/scripts/strategy

# Import sample dat
~/.local/bin/uv run import_web_content.py --sample
```

**Co se importuje:**
- ‚úÖ 4 kategorie (Tepeln√° ƒçerpadla, Dotace, Instalace, √öspora energie)
- ‚úÖ 2 obr√°zky (s metadata)
- ‚úÖ 3 ƒçl√°nky (s views, shares, SEO)
- ‚úÖ 2 web pages (homepage, product page)
- ‚úÖ Tagy a propojen√≠
- ‚úÖ Relationships Agent ‚Üí Article

### 4. Spu≈°tƒõn√≠ dotaz≈Ø

#### V Neo4j Browser:
1. Otev≈ôete `neo4j_queries.cypher`
2. Zkop√≠rujte po≈æadovan√Ω dotaz
3. Vlo≈æte do Neo4j Browser
4. Stisknƒõte **Ctrl+Enter**

#### Nebo z Dashboardu:
1. Kliknƒõte na dotaz
2. Kliknƒõte "Copy Query"
3. Vlo≈æte do Neo4j Browser

## üìà P≈ô√≠klady zaj√≠mav√Ωch sestav≈Ø

### üèÜ Top 5 Performing Agents

```cypher
MATCH (a:Agent)-[:EXECUTED]->(e:Execution)
RETURN 
    a.name as agent,
    count(e) as executions,
    round(avg(e.quality_score) * 100) / 100 as avg_quality,
    round((avg(e.quality_score) / avg(e.api_cost)) * 100) / 100 as quality_per_dollar
ORDER BY quality_per_dollar DESC
LIMIT 5;
```

**Output:**
```
agent              | executions | avg_quality | quality_per_dollar
-------------------|------------|-------------|-------------------
seo_specialist     | 15         | 0.92        | 184.00
content_writer     | 23         | 0.88        | 176.00
marketing_copy     | 8          | 0.85        | 170.00
```

### üì∞ Content Performance Leaderboard

```cypher
MATCH (a:Article)
WHERE a.views IS NOT NULL
WITH a, (a.views + a.shares * 5) as engagement
RETURN 
    a.title as article,
    a.views as views,
    a.shares as shares,
    engagement,
    CASE 
        WHEN engagement > 100 THEN 'üî• VIRAL'
        WHEN engagement > 50 THEN 'üìà TRENDING'
        ELSE 'üìä NORMAL'
    END as status
ORDER BY engagement DESC
LIMIT 10;
```

**Output:**
```
article                                    | views | shares | engagement | status
-------------------------------------------|-------|--------|------------|----------
Dotace na tepeln√° ƒçerpadla 2024            | 890   | 67     | 1225       | üî• VIRAL
Jak vybrat spr√°vn√© tepeln√© ƒçerpadlo        | 450   | 23     | 565        | üìà TRENDING
Instalace tepeln√©ho ƒçerpadla               | 320   | 15     | 395        | üìà TRENDING
```

### üéØ Content Gap Analysis

```cypher
MATCH (c:Category)
OPTIONAL MATCH (a:Article)-[:IN_CATEGORY]->(c)
WITH c, count(a) as article_count
RETURN 
    c.name as category,
    article_count,
    CASE 
        WHEN article_count = 0 THEN 'üî¥ CRITICAL'
        WHEN article_count < 3 THEN 'üü° LOW'
        WHEN article_count < 10 THEN 'üü¢ MEDIUM'
        ELSE '‚úÖ HIGH'
    END as coverage
ORDER BY article_count ASC;
```

**Output:**
```
category          | article_count | coverage
------------------|---------------|-------------
√öspora energie    | 0             | üî¥ CRITICAL
Instalace         | 1             | üü° LOW
Dotace            | 1             | üü° LOW
Tepeln√° ƒçerpadla  | 2             | üü° LOW
```

‚Üí **Akce:** Vytvo≈ôit content pro "√öspora energie"!

### üîó Complete Content Pipeline

```cypher
MATCH path = (agent:Agent)-[:CREATED]->(a:Article)-[:CONTAINS_IMAGE]->(i:Image)
RETURN 
    agent.name as agent,
    a.title as article,
    a.views as views,
    count(i) as images
ORDER BY a.views DESC
LIMIT 5;
```

**Vizualizace:** P≈ôepnƒõte na **Graph view** pro s√≠≈•ov√Ω diagram!

### üí∞ ROI by Category

```cypher
MATCH (e:Execution)-[:FOR_TASK]->(t:Task)
OPTIONAL MATCH (t)-[:GENERATED_CONTENT]->(a:Article)
RETURN 
    t.category as category,
    count(e) as executions,
    round(sum(e.api_cost) * 100) / 100 as total_cost,
    sum(a.views) as total_views,
    round(sum(a.views) / NULLIF(sum(e.api_cost), 0)) as views_per_dollar
ORDER BY views_per_dollar DESC;
```

**Metrika:** Views per dollar - kter√© kategorie generuj√≠ nejv√≠c hodnoty?

## üé® Vizualizace v Neo4j Browser

### Graph View Examples

#### 1. Agent Collaboration Network
```cypher
MATCH (a1:Agent)-[:EXECUTED]->(:Execution)-[:FOR_TASK]->(t:Task)
      <-[:FOR_TASK]-(:Execution)<-[:EXECUTED]-(a2:Agent)
WHERE a1 <> a2
RETURN a1, t, a2
LIMIT 50
```

**Zobraz√≠:** S√≠≈• spolupr√°ce mezi agenty

#### 2. Content Creation Flow
```cypher
MATCH path = (agent:Agent)-[:CREATED]->(article:Article)
             -[:IN_CATEGORY]->(category:Category)
RETURN path
LIMIT 100
```

**Zobraz√≠:** Kdo vytvo≈ôil jak√© ƒçl√°nky v jak√Ωch kategori√≠ch

#### 3. Learning Patterns
```cypher
MATCH path = (agent:Agent)-[:EXECUTED]->(:Execution)
             -[:GENERATED]->(learning:Learning)
             -[:LEARNED_FROM]->(pattern:Pattern)
RETURN path
LIMIT 50
```

**Zobraz√≠:** Jak se agenti uƒç√≠ a jak√© patterns vytv√°≈ô√≠

## üìä Python API Usage

### Import web content

```python
from neo4j_db import init_neo4j
from web_content_schema import WebContentSchema

# Initialize
neo4j_conn = init_neo4j(
    uri="bolt://localhost:7687",
    user="neo4j",
    password="ac-heating-2024"
)

web_schema = WebContentSchema(neo4j_conn)
web_schema.create_web_indexes()

# Create article
article_data = {
    "id": "unique-id",
    "title": "Nov√Ω ƒçl√°nek o tepeln√Ωch ƒçerpadlech",
    "slug": "novy-clanek",
    "content": "Obsah ƒçl√°nku...",
    "views": 0,
    "shares": 0,
    "created_by": "content_writer"
}
web_schema.create_article_node(article_data)

# Link to category
web_schema.link_article_to_category("unique-id", "Tepeln√° ƒçerpadla")

# Add tags
web_schema.add_article_tags("unique-id", ["tepeln√° ƒçerpadla", "√∫spora", "ekologie"])

# Get analytics
analytics = web_schema.get_article_analytics("unique-id")
print(analytics)
```

### Get performance metrics

```python
# Top performing content
top_content = web_schema.get_content_performance(limit=10)
for article in top_content:
    print(f"{article['title']}: {article['engagement_score']} engagement")

# Image usage
image_stats = web_schema.get_image_usage()
for img in image_stats:
    print(f"{img['image_url']}: used in {img['used_in_articles']} articles")

# Category distribution
categories = web_schema.get_category_distribution()
for cat in categories:
    print(f"{cat['category']}: {cat['article_count']} articles, {cat['avg_views']} avg views")
```

## üî• Best Practices

### Monitoring Workflow

**Denn√≠ checkup:**
1. `#1` - Celkov√Ω p≈ôehled syst√©mu
2. `#28` - Posledn√≠ Activity (24h)
3. `#30` - Error Analysis
4. `#29` - Active Tasks NOW

**T√Ωdenn√≠ reporting:**
1. `#3` - Agent Performance Overview
2. `#18` - Top Performing Content
3. `#24` - ROI Analysis
4. `#32` - Agent Efficiency

**Mƒõs√≠ƒçn√≠ strategick√Ω review:**
1. `#31` - Content Gap Analysis
2. `#33` - Viral Content Prediction
3. `#27` - Knowledge Graph Completeness
4. `#14` - Learning Insights per Agent

### Performance Optimization

**Pro rychlej≈°√≠ dotazy:**

```cypher
// Pou≈æijte LIMIT
MATCH (a:Article)
RETURN a
LIMIT 100

// Indexujte ƒçasto dotazovan√° pole
// (u≈æ vytvo≈ôen√© automaticky)

// Pou≈æijte WHERE pro filtrov√°n√≠
MATCH (a:Article)
WHERE a.views > 500
RETURN a
```

## üìö Dokumentace

### Hlavn√≠ dokumenty
1. **NEO4J_INTEGRATION_GUIDE.md** - Z√°kladn√≠ guide pro Neo4j
2. **NEO4J_QUERIES_GUIDE.md** - Detailn√≠ pr≈Øvodce v≈°emi dotazy
3. **NEO4J_ANALYTICS_COMPLETE.md** - Tento dokument (overview)
4. **IMPLEMENTATION_SUMMARY.md** - Co bylo implementov√°no

### Quick Reference

```bash
# Neo4j Browser
http://91.99.126.53:7474

# Dashboard
file:///.../neo4j_dashboard.html

# Import sample content
~/.local/bin/uv run import_web_content.py --sample

# All queries
cat neo4j_queries.cypher
```

## üéä Z√°vƒõr

**Status: PRODUCTION READY** ‚úÖ

M√°te k dispozici:
- ‚úÖ 33 p≈ôedp≈ôipraven√Ωch dotaz≈Ø
- ‚úÖ Interaktivn√≠ HTML dashboard
- ‚úÖ Roz≈°√≠≈ôen√© schema pro web content
- ‚úÖ Python API pro import dat
- ‚úÖ Kompletn√≠ dokumentaci
- ‚úÖ Sample data pro testov√°n√≠

### Next Steps

1. **Import produkƒçn√≠ch dat**
   - Napojte na real database
   - Importujte skuteƒçn√© ƒçl√°nky
   - Propojte s tasky

2. **Custom vizualizace**
   - Vytvo≈ôte vlastn√≠ dashboardy
   - Export do BI n√°stroj≈Ø
   - Real-time monitoring

3. **Automatizace**
   - Scheduled reports
   - Alert system
   - Auto-import nov√©ho contentu

4. **Roz≈°√≠≈ôen√≠**
   - User behavior tracking
   - A/B testing results
   - Conversion tracking

---

**Happy Analytics!** üìäüöÄ

Vytvo≈ôeno: 2025-10-30  
Verze: 1.0  
Status: Complete ‚úÖ
